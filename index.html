<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FairPrice - Stop Getting Overcharged</title>
  <meta name="description" content="Track subscription price increases and optimize your spending">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState } = React;
    
    // Lucide icons as simple SVG components
    const AlertCircle = ({ className }) => (
      <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <circle cx="12" cy="12" r="10"/>
        <line x1="12" y1="8" x2="12" y2="12"/>
        <line x1="12" y1="16" x2="12.01" y2="16"/>
      </svg>
    );
    
    const TrendingUp = ({ className }) => (
      <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/>
        <polyline points="17 6 23 6 23 12"/>
      </svg>
    );
    
    const DollarSign = ({ className }) => (
      <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <line x1="12" y1="1" x2="12" y2="23"/>
        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
      </svg>
    );
    
    const Zap = ({ className }) => (
      <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
      </svg>
    );
    
    const CheckCircle = ({ className }) => (
      <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
        <polyline points="22 4 12 14.01 9 11.01"/>
      </svg>
    );
    
    const Clock = ({ className }) => (
      <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <circle cx="12" cy="12" r="10"/>
        <polyline points="12 6 12 12 16 14"/>
      </svg>
    );

    const ChevronDown = ({ className }) => (
      <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <polyline points="6 9 12 15 18 9"/>
      </svg>
    );

    const Filter = ({ className }) => (
      <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/>
      </svg>
    );

    const ArrowUpDown = ({ className }) => (
      <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <path d="m21 16-4 4-4-4"/>
        <path d="M17 20V4"/>
        <path d="m3 8 4-4 4 4"/>
        <path d="M7 4v16"/>
      </svg>
    );

    const X = ({ className }) => (
      <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <line x1="18" y1="6" x2="6" y2="18"/>
        <line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    );

    const Shield = ({ className }) => (
      <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
      </svg>
    );

    const CreditCard = ({ className }) => (
      <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
        <line x1="1" y1="10" x2="23" y2="10"/>
      </svg>
    );

    const Sparkles = ({ className }) => (
      <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/>
        <path d="M5 3v4"/>
        <path d="M19 17v4"/>
        <path d="M3 5h4"/>
        <path d="M17 19h4"/>
      </svg>
    );

    // Modal Component
    const Modal = ({ isOpen, onClose, title, children }) => {
      if (!isOpen) return null;

      return (
        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm" onClick={onClose}>
          <div 
            className="bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"
            onClick={(e) => e.stopPropagation()}
          >
            <div className="sticky top-0 bg-white border-b-2 border-slate-100 p-6 flex items-center justify-between rounded-t-3xl">
              <h2 className="text-2xl font-bold text-slate-900">{title}</h2>
              <button
                onClick={onClose}
                className="w-10 h-10 rounded-xl hover:bg-slate-100 flex items-center justify-center transition-colors"
              >
                <X className="w-6 h-6 text-slate-600" />
              </button>
            </div>
            <div className="p-6">
              {children}
            </div>
          </div>
        </div>
      );
    };

    const FairPriceApp = () => {
      const [activeTab, setActiveTab] = useState('dashboard');
      const [selectedSub, setSelectedSub] = useState(null);
      const [sortBy, setSortBy] = useState('savings');
      const [filterStatus, setFilterStatus] = useState('all');
      const [showSavingsCalc, setShowSavingsCalc] = useState(false);
      const [calcMonths, setCalcMonths] = useState(12);
      const [modalOpen, setModalOpen] = useState(null);
      const [selectedSubForModal, setSelectedSubForModal] = useState(null);

      const subscriptions = [
        {
          id: 1,
          name: 'Netflix',
          currentPrice: 22.99,
          originalPrice: 15.99,
          startDate: 'Jan 2023',
          lastIncrease: 'Sep 2024',
          increases: 3,
          category: 'Streaming',
          status: 'overpriced',
          usageScore: 85,
          recommendedTier: 'Current plan optimal',
          priceHistory: [
            { date: 'Jan 2023', price: 15.99 },
            { date: 'Jul 2023', price: 17.99 },
            { date: 'Mar 2024', price: 19.99 },
            { date: 'Sep 2024', price: 22.99 }
          ],
          monthlySavings: 0,
          alert: 'Price increased by $3 last month',
          increasePercent: 44
        },
        {
          id: 2,
          name: 'Spotify Family',
          currentPrice: 16.99,
          originalPrice: 14.99,
          startDate: 'Mar 2022',
          lastIncrease: 'Aug 2024',
          increases: 2,
          category: 'Music',
          status: 'wasteful',
          usageScore: 40,
          recommendedTier: 'Downgrade to Individual ($10.99)',
          priceHistory: [
            { date: 'Mar 2022', price: 14.99 },
            { date: 'Jul 2023', price: 15.99 },
            { date: 'Aug 2024', price: 16.99 }
          ],
          monthlySavings: 6.00,
          alert: 'Only 2 of 6 accounts active - save $6/mo',
          increasePercent: 13
        },
        {
          id: 3,
          name: 'Adobe Creative Cloud',
          currentPrice: 54.99,
          originalPrice: 52.99,
          startDate: 'May 2023',
          lastIncrease: 'Jan 2025',
          increases: 1,
          category: 'Software',
          status: 'fair',
          usageScore: 95,
          recommendedTier: 'Current plan optimal',
          priceHistory: [
            { date: 'May 2023', price: 52.99 },
            { date: 'Jan 2025', price: 54.99 }
          ],
          monthlySavings: 0,
          alert: null,
          increasePercent: 4
        },
        {
          id: 4,
          name: 'Planet Fitness',
          currentPrice: 24.99,
          originalPrice: 10.99,
          startDate: 'Jan 2021',
          lastIncrease: 'Jun 2024',
          increases: 4,
          category: 'Fitness',
          status: 'overpriced',
          usageScore: 30,
          recommendedTier: 'Basic plan ($10.99)',
          priceHistory: [
            { date: 'Jan 2021', price: 10.99 },
            { date: 'Jan 2022', price: 14.99 },
            { date: 'Jul 2022', price: 17.99 },
            { date: 'Jan 2023', price: 22.99 },
            { date: 'Jun 2024', price: 24.99 }
          ],
          monthlySavings: 14.00,
          alert: 'Used only 3 times this year - downgrade or cancel',
          increasePercent: 127
        },
        {
          id: 5,
          name: 'ChatGPT Plus',
          currentPrice: 20.00,
          originalPrice: 20.00,
          startDate: 'Feb 2023',
          lastIncrease: null,
          increases: 0,
          category: 'AI',
          status: 'fair',
          usageScore: 90,
          recommendedTier: 'Current plan optimal',
          priceHistory: [
            { date: 'Feb 2023', price: 20.00 }
          ],
          monthlySavings: 0,
          alert: null,
          increasePercent: 0
        }
      ];

      const totalSpent = subscriptions.reduce((sum, sub) => sum + sub.currentPrice, 0);
      const totalOriginal = subscriptions.reduce((sum, sub) => sum + sub.originalPrice, 0);
      const potentialSavings = subscriptions.reduce((sum, sub) => sum + sub.monthlySavings, 0);
      const totalIncreases = totalSpent - totalOriginal;
      const yearlyWaste = potentialSavings * 12;

      const filteredSubs = subscriptions
        .filter(sub => {
          if (activeTab === 'alerts') return sub.alert;
          if (filterStatus === 'all') return true;
          return sub.status === filterStatus;
        })
        .sort((a, b) => {
          if (sortBy === 'savings') return b.monthlySavings - a.monthlySavings;
          if (sortBy === 'price') return b.currentPrice - a.currentPrice;
          if (sortBy === 'increases') return b.increases - a.increases;
          return 0;
        });

      const getStatusColor = (status) => {
        switch(status) {
          case 'overpriced': return 'text-red-600 bg-red-50 border-red-300';
          case 'wasteful': return 'text-yellow-700 bg-yellow-50 border-yellow-300';
          case 'fair': return 'text-emerald-700 bg-emerald-50 border-emerald-300';
          default: return 'text-slate-600 bg-slate-50 border-slate-300';
        }
      };

      const getStatusIcon = (status) => {
        switch(status) {
          case 'overpriced': return <TrendingUp className="w-4 h-4" />;
          case 'wasteful': return <AlertCircle className="w-4 h-4" />;
          case 'fair': return <CheckCircle className="w-4 h-4" />;
          default: return <Clock className="w-4 h-4" />;
        }
      };

      const openModal = (type, sub = null) => {
        setModalOpen(type);
        setSelectedSubForModal(sub);
      };

      return (
        <div className="min-h-screen bg-gradient-to-br from-blue-50 via-slate-50 to-emerald-50">
          <div className="max-w-6xl mx-auto p-6">
            {/* Header */}
            <div className="mb-8">
              <div className="flex items-center gap-3 mb-2">
                <div className="w-12 h-12 bg-gradient-to-br from-blue-600 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg">
                  <Sparkles className="w-7 h-7 text-white" />
                </div>
                <h1 className="text-4xl font-bold bg-gradient-to-r from-blue-700 to-emerald-600 bg-clip-text text-transparent">FairPrice</h1>
              </div>
              <p className="text-slate-600 text-lg">Stop getting quietly overcharged on subscriptions</p>
            </div>

            {/* Alert Banner */}
            {potentialSavings > 0 && (
              <div className="mb-6 p-5 bg-gradient-to-r from-yellow-300 via-yellow-400 to-yellow-500 rounded-2xl text-slate-900 shadow-xl">
                <div className="flex items-start gap-4">
                  <div className="w-12 h-12 bg-white/30 rounded-xl flex items-center justify-center flex-shrink-0">
                    <AlertCircle className="w-7 h-7" />
                  </div>
                  <div className="flex-1">
                    <h3 className="font-bold text-xl mb-1">You're losing ${potentialSavings.toFixed(2)}/month</h3>
                    <p className="text-slate-800 text-lg">That's ${yearlyWaste.toFixed(0)}/year in wasteful spending we can help you recover</p>
                  </div>
                </div>
              </div>
            )}

            {/* Stats Cards */}
            <div className="grid grid-cols-1 md:grid-cols-4 gap-5 mb-8">
              <div className="bg-white p-6 rounded-2xl shadow-sm border-2 border-slate-100 hover:shadow-md transition-shadow">
                <div className="flex items-center justify-between mb-3">
                  <span className="text-slate-600 font-medium">Monthly Spend</span>
                  <div className="w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center">
                    <DollarSign className="w-5 h-5 text-blue-600" />
                  </div>
                </div>
                <p className="text-3xl font-bold text-slate-900">${totalSpent.toFixed(2)}</p>
                <p className="text-sm text-slate-500 mt-1">{subscriptions.length} active subscriptions</p>
              </div>

              <div className="bg-white p-6 rounded-2xl shadow-sm border-2 border-slate-100 hover:shadow-md transition-shadow">
                <div className="flex items-center justify-between mb-3">
                  <span className="text-slate-600 font-medium">Price Increases</span>
                  <div className="w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center">
                    <TrendingUp className="w-5 h-5 text-red-600" />
                  </div>
                </div>
                <p className="text-3xl font-bold text-red-600">+${totalIncreases.toFixed(2)}</p>
                <p className="text-sm text-slate-500 mt-1">Since you started</p>
              </div>

              <div className="bg-white p-6 rounded-2xl shadow-sm border-2 border-slate-100 hover:shadow-md transition-shadow">
                <div className="flex items-center justify-between mb-3">
                  <span className="text-slate-600 font-medium">Potential Savings</span>
                  <div className="w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center">
                    <Zap className="w-5 h-5 text-emerald-600" />
                  </div>
                </div>
                <p className="text-3xl font-bold text-emerald-600">${potentialSavings.toFixed(2)}</p>
                <p className="text-sm text-slate-500 mt-1">Per month</p>
              </div>

              <div className="bg-white p-6 rounded-2xl shadow-sm border-2 border-slate-100 hover:shadow-md transition-shadow">
                <div className="flex items-center justify-between mb-3">
                  <span className="text-slate-600 font-medium">Yearly Impact</span>
                  <div className="w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center">
                    <DollarSign className="w-5 h-5 text-blue-600" />
                  </div>
                </div>
                <p className="text-3xl font-bold text-blue-600">${yearlyWaste.toFixed(0)}</p>
                <p className="text-sm text-slate-500 mt-1">Annual savings available</p>
              </div>
            </div>

            {/* Interactive Savings Calculator */}
            <div className="mb-8 bg-white rounded-2xl shadow-sm border-2 border-slate-100 overflow-hidden">
              <button
                onClick={() => setShowSavingsCalc(!showSavingsCalc)}
                className="w-full p-5 flex items-center justify-between hover:bg-slate-50 transition-colors"
              >
                <div className="flex items-center gap-3">
                  <div className="w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center">
                    <Zap className="w-5 h-5 text-emerald-600" />
                  </div>
                  <div className="text-left">
                    <h3 className="font-bold text-slate-900">Savings Calculator</h3>
                    <p className="text-sm text-slate-600">See how much you'll save over time</p>
                  </div>
                </div>
                <ChevronDown className={`w-5 h-5 text-slate-400 transition-transform ${showSavingsCalc ? 'rotate-180' : ''}`} />
              </button>
              
              {showSavingsCalc && (
                <div className="p-6 border-t border-slate-100 bg-slate-50">
                  <div className="mb-6">
                    <label className="block text-sm font-medium text-slate-700 mb-3">
                      How many months ahead? <span className="text-emerald-600 font-bold">{calcMonths} months</span>
                    </label>
                    <input
                      type="range"
                      min="1"
                      max="36"
                      value={calcMonths}
                      onChange={(e) => setCalcMonths(Number(e.target.value))}
                      className="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer"
                    />
                    <div className="flex justify-between text-xs text-slate-500 mt-1">
                      <span>1 mo</span>
                      <span>36 mo</span>
                    </div>
                  </div>
                  
                  <div className="grid grid-cols-3 gap-4">
                    <div className="bg-white p-4 rounded-xl border-2 border-slate-200">
                      <p className="text-xs text-slate-600 mb-1">Total Saved</p>
                      <p className="text-2xl font-bold text-emerald-600">${(potentialSavings * calcMonths).toFixed(0)}</p>
                    </div>
                    <div className="bg-white p-4 rounded-xl border-2 border-slate-200">
                      <p className="text-xs text-slate-600 mb-1">Price Increases</p>
                      <p className="text-2xl font-bold text-red-600">${(totalIncreases * (calcMonths / 12)).toFixed(0)}</p>
                    </div>
                    <div className="bg-white p-4 rounded-xl border-2 border-slate-200">
                      <p className="text-xs text-slate-600 mb-1">Net Benefit</p>
                      <p className="text-2xl font-bold text-blue-600">${((potentialSavings * calcMonths) + (totalIncreases * (calcMonths / 12))).toFixed(0)}</p>
                    </div>
                  </div>
                </div>
              )}
            </div>

            {/* Tabs and Controls */}
            <div className="mb-6">
              <div className="flex flex-wrap items-center justify-between gap-4 mb-4">
                <div className="flex gap-2">
                  <button
                    onClick={() => setActiveTab('dashboard')}
                    className={`px-5 py-2.5 font-semibold rounded-xl transition-all ${
                      activeTab === 'dashboard'
                        ? 'bg-blue-600 text-white shadow-md'
                        : 'bg-white text-slate-600 hover:bg-slate-50 border-2 border-slate-200'
                    }`}
                  >
                    All Subscriptions
                  </button>
                  <button
                    onClick={() => setActiveTab('alerts')}
                    className={`px-5 py-2.5 font-semibold rounded-xl transition-all flex items-center gap-2 ${
                      activeTab === 'alerts'
                        ? 'bg-blue-600 text-white shadow-md'
                        : 'bg-white text-slate-600 hover:bg-slate-50 border-2 border-slate-200'
                    }`}
                  >
                    Alerts
                    <span className="bg-red-500 text-white text-xs font-bold px-2 py-0.5 rounded-full">
                      {subscriptions.filter(s => s.alert).length}
                    </span>
                  </button>
                </div>

                <div className="flex gap-3">
                  <div className="relative">
                    <select
                      value={filterStatus}
                      onChange={(e) => setFilterStatus(e.target.value)}
                      className="appearance-none bg-white border-2 border-slate-200 rounded-xl px-4 py-2.5 pr-10 font-medium text-slate-700 hover:border-slate-300 focus:outline-none focus:border-blue-500 cursor-pointer"
                    >
                      <option value="all">All Status</option>
                      <option value="overpriced">Overpriced</option>
                      <option value="wasteful">Wasteful</option>
                      <option value="fair">Fair Price</option>
                    </select>
                    <Filter className="absolute right-3 top-3 w-5 h-5 text-slate-400 pointer-events-none" />
                  </div>

                  <div className="relative">
                    <select
                      value={sortBy}
                      onChange={(e) => setSortBy(e.target.value)}
                      className="appearance-none bg-white border-2 border-slate-200 rounded-xl px-4 py-2.5 pr-10 font-medium text-slate-700 hover:border-slate-300 focus:outline-none focus:border-blue-500 cursor-pointer"
                    >
                      <option value="savings">Highest Savings</option>
                      <option value="price">Highest Price</option>
                      <option value="increases">Most Increases</option>
                    </select>
                    <ArrowUpDown className="absolute right-3 top-3 w-5 h-5 text-slate-400 pointer-events-none" />
                  </div>
                </div>
              </div>
            </div>

            {/* Subscription List */}
            <div className="space-y-4">
              {filteredSubs.map(sub => (
                <div
                  key={sub.id}
                  className="bg-white rounded-2xl shadow-sm border-2 border-slate-100 overflow-hidden hover:shadow-lg hover:border-slate-200 transition-all"
                >
                  <div className="p-6">
                    <div className="flex items-start justify-between mb-5">
                      <div className="flex-1">
                        <div className="flex items-center gap-3 mb-2">
                          <h3 className="text-2xl font-bold text-slate-900">{sub.name}</h3>
                          <span className={`px-3 py-1.5 rounded-xl text-xs font-bold border-2 flex items-center gap-1.5 ${getStatusColor(sub.status)}`}>
                            {getStatusIcon(sub.status)}
                            {sub.status === 'overpriced' && 'Price Creep'}
                            {sub.status === 'wasteful' && 'Wasteful'}
                            {sub.status === 'fair' && 'Fair Price'}
                          </span>
                          {sub.increasePercent > 0 && (
                            <span className="px-3 py-1.5 rounded-xl text-xs font-bold bg-red-100 text-red-700 border-2 border-red-200">
                              +{sub.increasePercent}%
                            </span>
                          )}
                        </div>
                        <p className="text-slate-600 font-medium">{sub.category} â€¢ Member since {sub.startDate}</p>
                      </div>
                      <div className="text-right">
                        <p className="text-3xl font-bold text-slate-900">${sub.currentPrice}</p>
                        <p className="text-sm text-slate-500 font-medium">per month</p>
                      </div>
                    </div>

                    {sub.alert && (
                      <div className="mb-5 p-4 bg-gradient-to-r from-yellow-50 to-yellow-100 border-2 border-yellow-300 rounded-xl flex items-start gap-3">
                        <AlertCircle className="w-6 h-6 text-yellow-700 flex-shrink-0 mt-0.5" />
                        <p className="text-sm text-yellow-900 font-semibold">{sub.alert}</p>
                      </div>
                    )}

                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-5">
                      <div className="bg-slate-50 p-4 rounded-xl">
                        <p className="text-xs text-slate-600 font-medium mb-1">Original Price</p>
                        <p className="font-bold text-slate-900 text-lg">${sub.originalPrice}</p>
                      </div>
                      <div className="bg-slate-50 p-4 rounded-xl">
                        <p className="text-xs text-slate-600 font-medium mb-1">Price Increases</p>
                        <p className="font-bold text-red-600 text-lg">{sub.increases} times</p>
                      </div>
                      <div className="bg-slate-50 p-4 rounded-xl">
                        <p className="text-xs text-slate-600 font-medium mb-1">Usage Score</p>
                        <div className="flex items-center gap-2">
                          <div className="flex-1 bg-slate-200 rounded-full h-2">
                            <div 
                              className={`h-2 rounded-full ${sub.usageScore > 70 ? 'bg-emerald-500' : sub.usageScore > 40 ? 'bg-yellow-500' : 'bg-red-500'}`}
                              style={{ width: `${sub.usageScore}%` }}
                            />
                          </div>
                          <span className="font-bold text-slate-900 text-lg">{sub.usageScore}%</span>
                        </div>
                      </div>
                      <div className="bg-slate-50 p-4 rounded-xl">
                        <p className="text-xs text-slate-600 font-medium mb-1">Monthly Savings</p>
                        <p className="font-bold text-emerald-600 text-lg">
                          {sub.monthlySavings > 0 ? `${sub.monthlySavings.toFixed(2)}` : 'None'}
                        </p>
                      </div>
                    </div>

                    {sub.recommendedTier !== 'Current plan optimal' && (
                      <div className="mb-5 p-4 bg-emerald-50 border-2 border-emerald-300 rounded-xl">
                        <p className="text-sm font-bold text-emerald-800">
                          ðŸ’¡ Recommendation: {sub.recommendedTier}
                        </p>
                      </div>
                    )}

                    <button
                      onClick={() => setSelectedSub(selectedSub === sub.id ? null : sub.id)}
                      className="text-blue-600 hover:text-blue-700 font-bold flex items-center gap-2 transition-colors"
                    >
                      {selectedSub === sub.id ? 'Hide' : 'View'} Price History
                      <ChevronDown className={`w-4 h-4 transition-transform ${selectedSub === sub.id ? 'rotate-180' : ''}`} />
                    </button>

                    {selectedSub === sub.id && (
                      <div className="mt-5 pt-5 border-t-2 border-slate-100">
                        <h4 className="font-bold text-slate-900 mb-4 text-lg">Price History</h4>
                        <div className="space-y-2 mb-5">
                          {sub.priceHistory.map((entry, idx) => (
                            <div key={idx} className="flex items-center justify-between py-3 px-4 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors">
                              <span className="font-medium text-slate-700">{entry.date}</span>
                              <div className="flex items-center gap-4">
                                <span className="font-bold text-slate-900 text-lg">${entry.price}</span>
                                {idx > 0 && (
                                  <span className="text-sm font-bold text-red-600 bg-red-50 px-3 py-1 rounded-lg">
                                    +${(entry.price - sub.priceHistory[idx - 1].price).toFixed(2)}
                                  </span>
                                )}
                              </div>
                            </div>
                          ))}
                        </div>
                        <div className="flex gap-3">
                          <button 
                            onClick={() => openModal('optimize', sub)}
                            className="flex-1 px-5 py-3 bg-gradient-to-r from-blue-600 to-emerald-500 text-white rounded-xl font-bold hover:shadow-lg transition-all"
                          >
                            Optimize Plan
                          </button>
                          <button 
                            onClick={() => openModal('cancel', sub)}
                            className="flex-1 px-5 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors"
                          >
                            Cancel Subscription
                          </button>
                        </div>
                      </div>
                    )}
                  </div>
                </div>
              ))}
            </div>

            {/* CTA */}
            <div className="mt-8 p-8 bg-gradient-to-r from-blue-600 to-emerald-500 rounded-2xl text-white text-center shadow-xl">
              <h3 className="text-3xl font-bold mb-3">Ready to stop overpaying?</h3>
              <p className="mb-6 text-white/95 text-lg">Connect your bank account securely to see your real subscription costs</p>
              <button 
                onClick={() => openModal('connect')}
                className="px-8 py-4 bg-white text-blue-600 rounded-xl font-bold text-lg hover:bg-slate-50 transition-colors shadow-lg"
              >
                Connect Bank Account
              </button>
              <p className="mt-4 text-sm text-white/80">ðŸ”’ Bank-level encryption via Plaid â€¢ Your data is never sold</p>
            </div>
          </div>

          {/* Modals */}
          <Modal 
            isOpen={modalOpen === 'connect'} 
            onClose={() => setModalOpen(null)}
            title="Connect Your Bank Account"
          >
            <div className="space-y-6">
              <div className="flex items-start gap-4 p-4 bg-blue-50 border-2 border-blue-200 rounded-xl">
                <Shield className="w-6 h-6 text-blue-600 flex-shrink-0 mt-1" />
                <div>
                  <h4 className="font-bold text-slate-900 mb-1">Bank-Level Security</h4>
                  <p className="text-sm text-slate-600">We use Plaid, the same technology trusted by Venmo, Robinhood, and thousands of financial apps. Your credentials are encrypted and never stored on our servers.</p>
                </div>
              </div>

              <div className="space-y-4">
                <h4 className="font-bold text-slate-900">What happens next:</h4>
                <div className="space-y-3">
                  <div className="flex gap-3">
                    <div className="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold flex-shrink-0">1</div>
                    <div>
                      <p className="font-semibold text-slate-900">Select your bank</p>
                      <p className="text-sm text-slate-600">Choose from 12,000+ supported financial institutions</p>
                    </div>
                  </div>
                  <div className="flex gap-3">
                    <div className="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold flex-shrink-0">2</div>
                    <div>
                      <p className="font-semibold text-slate-900">Securely authenticate</p>
                      <p className="text-sm text-slate-600">Log in directly through your bank's secure portal</p>
                    </div>
                  </div>
                  <div className="flex gap-3">
                    <div className="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold flex-shrink-0">3</div>
                    <div>
                      <p className="font-semibold text-slate-900">Instant analysis</p>
                      <p className="text-sm text-slate-600">We'll scan your transactions and identify all subscriptions in seconds</p>
                    </div>
                  </div>
                  <div className="flex gap-3">
                    <div className="w-8 h-8 bg-emerald-600 text-white rounded-full flex items-center justify-center font-bold flex-shrink-0">4</div>
                    <div>
                      <p className="font-semibold text-slate-900">Start saving</p>
                      <p className="text-sm text-slate-600">Get real-time alerts on price increases and personalized optimization recommendations</p>
                    </div>
                  </div>
                </div>
              </div>

              <div className="pt-4 border-t-2 border-slate-100">
                <button className="w-full px-6 py-4 bg-gradient-to-r from-blue-600 to-emerald-500 text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all flex items-center justify-center gap-2">
                  <CreditCard className="w-5 h-5" />
                  Continue with Plaid
                </button>
                <p className="text-xs text-center text-slate-500 mt-3">By connecting, you agree to our Terms of Service and Privacy Policy</p>
              </div>
            </div>
          </Modal>

          <Modal 
            isOpen={modalOpen === 'optimize'} 
            onClose={() => setModalOpen(null)}
            title={`Optimize ${selectedSubForModal?.name || 'Subscription'}`}
          >
            <div className="space-y-6">
              <div className="flex items-start gap-4 p-4 bg-emerald-50 border-2 border-emerald-200 rounded-xl">
                <Sparkles className="w-6 h-6 text-emerald-600 flex-shrink-0 mt-1" />
                <div>
                  <h4 className="font-bold text-slate-900 mb-1">AI-Powered Optimization</h4>
                  <p className="text-sm text-slate-600">We analyze your actual usage patterns and compare them against all available plans to find the perfect fit.</p>
                </div>
              </div>

              {selectedSubForModal && (
                <div className="space-y-4">
                  <div className="bg-slate-50 p-4 rounded-xl border-2 border-slate-200">
                    <div className="flex justify-between items-start mb-3">
                      <div>
                        <p className="text-sm text-slate-600 mb-1">Current Plan</p>
                        <p className="text-2xl font-bold text-slate-900">${selectedSubForModal.currentPrice}/mo</p>
                      </div>
                      <div className="text-right">
                        <p className="text-sm text-slate-600 mb-1">Usage Score</p>
                        <p className="text-2xl font-bold text-slate-900">{selectedSubForModal.usageScore}%</p>
                      </div>
                    </div>
                  </div>

                  <h4 className="font-bold text-slate-900">How we'll optimize:</h4>
                  <div className="space-y-3">
                    <div className="flex gap-3">
                      <div className="w-8 h-8 bg-emerald-600 text-white rounded-full flex items-center justify-center font-bold flex-shrink-0">1</div>
                      <div>
                        <p className="font-semibold text-slate-900">Analyze your usage</p>
                        <p className="text-sm text-slate-600">Connect to your {selectedSubForModal.name} account to see exactly how you use the service</p>
                      </div>
                    </div>
                    <div className="flex gap-3">
                      <div className="w-8 h-8 bg-emerald-600 text-white rounded-full flex items-center justify-center font-bold flex-shrink-0">2</div>
                      <div>
                        <p className="font-semibold text-slate-900">Compare all plans</p>
                        <p className="text-sm text-slate-600">We'll check every available tier and pricing option</p>
                      </div>
                    </div>
                    <div className="flex gap-3">
                      <div className="w-8 h-8 bg-emerald-600 text-white rounded-full flex items-center justify-center font-bold flex-shrink-0">3</div>
                      <div>
                        <p className="font-semibold text-slate-900">Recommend the best fit</p>
                        <p className="text-sm text-slate-600">Get a personalized recommendation that matches your usage and saves money</p>
                      </div>
                    </div>
                    <div className="flex gap-3">
                      <div className="w-8 h-8 bg-emerald-600 text-white rounded-full flex items-center justify-center font-bold flex-shrink-0">4</div>
                      <div>
                        <p className="font-semibold text-slate-900">Switch for you (optional)</p>
                        <p className="text-sm text-slate-600">We can handle the plan change directly, or provide step-by-step instructions</p>
                      </div>
                    </div>
                  </div>

                  {selectedSubForModal.monthlySavings > 0 && (
                    <div className="p-4 bg-emerald-50 border-2 border-emerald-300 rounded-xl">
                      <p className="text-sm font-bold text-emerald-900">
                        ðŸ’° Potential savings: ${selectedSubForModal.monthlySavings}/mo (${(selectedSubForModal.monthlySavings * 12).toFixed(0)}/year)
                      </p>
                    </div>
                  )}
                </div>
              )}

              <div className="pt-4 border-t-2 border-slate-100">
                <button className="w-full px-6 py-4 bg-gradient-to-r from-blue-600 to-emerald-500 text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all flex items-center justify-center gap-2">
                  <Zap className="w-5 h-5" />
                  Start Optimization
                </button>
              </div>
            </div>
          </Modal>

          <Modal 
            isOpen={modalOpen === 'cancel'} 
            onClose={() => setModalOpen(null)}
            title={`Cancel ${selectedSubForModal?.name || 'Subscription'}`}
          >
            <div className="space-y-6">
              <div className="flex items-start gap-4 p-4 bg-yellow-50 border-2 border-yellow-200 rounded-xl">
                <AlertCircle className="w-6 h-6 text-yellow-600 flex-shrink-0 mt-1" />
                <div>
                  <h4 className="font-bold text-slate-900 mb-1">We Make Cancellation Easy</h4>
                  <p className="text-sm text-slate-600">Most services make it intentionally difficult to cancel. We handle the entire process for you.</p>
                </div>
              </div>

              {selectedSubForModal && (
                <div className="space-y-4">
                  <div className="bg-slate-50 p-4 rounded-xl border-2 border-slate-200">
                    <div className="flex justify-between items-center mb-2">
                      <span className="text-sm text-slate-600">Current monthly charge</span>
                      <span className="text-2xl font-bold text-slate-900">${selectedSubForModal.currentPrice}</span>
                    </div>
                    <div className="flex justify-between items-center">
                      <span className="text-sm text-slate-600">Annual savings after cancellation</span>
                      <span className="text-2xl font-bold text-emerald-600">${(selectedSubForModal.currentPrice * 12).toFixed(0)}</span>
                    </div>
                  </div>

                  <h4 className="font-bold text-slate-900">How cancellation works:</h4>
                  <div className="space-y-3">
                    <div className="flex gap-3">
                      <div className="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold flex-shrink-0">1</div>
                      <div>
                        <p className="font-semibold text-slate-900">We contact the service</p>
                        <p className="text-sm text-slate-600">Our concierge team reaches out to {selectedSubForModal.name} on your behalf</p>
                      </div>
                    </div>
                    <div className="flex gap-3">
                      <div className="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold flex-shrink-0">2</div>
                      <div>
                        <p className="font-semibold text-slate-900">Navigate the maze</p>
                        <p className="text-sm text-slate-600">We handle hidden menus, retention offers, and confirmation emails</p>
                      </div>
                    </div>
                    <div className="flex gap-3">
                      <div className="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold flex-shrink-0">3</div>
                      <div>
                        <p className="font-semibold text-slate-900">Confirm cancellation</p>
                        <p className="text-sm text-slate-600">You'll receive a confirmation once it's fully processed</p>
                      </div>
                    </div>
                    <div className="flex gap-3">
                      <div className="w-8 h-8 bg-emerald-600 text-white rounded-full flex items-center justify-center font-bold flex-shrink-0">4</div>
                      <div>
                        <p className="font-semibold text-slate-900">Monitor for charges</p>
                        <p className="text-sm text-slate-600">We'll watch your account to ensure no erroneous charges appear</p>
                      </div>
                    </div>
                  </div>

                  <div className="p-4 bg-blue-50 border-2 border-blue-200 rounded-xl">
                    <p className="text-sm font-semibold text-blue-900 mb-2">ðŸ’¡ Alternative: Pause instead of cancel</p>
                    <p className="text-sm text-slate-600">Some services offer pause options. We can explore this if you might want to return later.</p>
                  </div>
                </div>
              )}

              <div className="pt-4 border-t-2 border-slate-100 space-y-3">
                <button className="w-full px-6 py-4 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all flex items-center justify-center gap-2">
                  <X className="w-5 h-5" />
                  Proceed with Cancellation
                </button>
                <button 
                  onClick={() => setModalOpen(null)}
                  className="w-full px-6 py-3 bg-slate-100 text-slate-700 rounded-xl font-semibold hover:bg-slate-200 transition-colors"
                >
                  Keep Subscription
                </button>
              </div>
            </div>
          </Modal>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<FairPriceApp />);
  </script>
</body>
</html>
